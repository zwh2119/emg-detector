# 基于肌肉电的动作识别系统
## 简要介绍
本系统是基于肌肉电识别的残疾人智能辅助系统，可以根据识别到的残疾人手势信号来进行不同的智能辅助处理 

## 代码结构

系统由如下几部分构成

- 肌肉电动作采集
- 肌肉电动作识别训练与预测
- 实时肌肉电数据流动作识别
- 终端小车控制
- 界面

### 肌肉电动作采集
主要集中在read_data.py中，对六通道肌肉电传感器进行数据采集（这里只采集了其中四个通道）。每次程序运行采集到的数据将保存到同一个文件中，为保证数据长度一致性，请按照程序运行后蜂鸣声的指示开始/结束采集，一次采集可以采集多个同一动作。

### 肌肉电动作训练与测试
采用GRU训练时间序列的肌肉电数据，并完成分类任务。训练与测试均是基于采集的有标签文件切分的数据，训练时需要设置窗口尺寸（window_size）来调节一次分类需要的数据点个数。

### 实时肌肉电数据流动作预测
采用多进程的方式，一边读取数据，一边按照窗口大小切分预测数据，由于数据传来的速度比模型预测速度快，采用了一些trick保证系统稳定

### 终端小车控制
集中在car_control文件夹下的car_control.py文件中，通过wifi控制终端履带小车，将不同的动作拆解成单元函数，将需要的连续动作封装成脚本函数


### 界面
主要集中在ui文件夹和main.py中，采用pyqt5编写简易的系统界面

## 快速开始
如果您需要快速地运行代码。请按照如下建议

配置环境：
```shell
pip install -r requirements.txt
```

在argparser.py中配置您需要的默认参数值或在命令行运行时使用超参数设置
参数说明：
```shell
# data_file: 数据集所在位置（文件夹）
# in_model_file: 输入预训练模型位置
# out_model_file: 输出预训练模型位置
# epochs: 迭代次数
# window_size: 数据窗口大小（多少个肌肉电数据点作为一段）

```


### 肌肉电数据采集

```shell
# 提前设置好保存的文件和肌肉电硬件输入端口
python read_data.py
```

### 肌肉电数据训练
```shell
# 提前在argparser.py里TrainParser设置好默认训练参数或在运行命令中加入超参数
# 可通过调整训练epoch、窗口大小window_size寻找最优配置
python train.py
```
### 肌肉电数据测试
```shell
# 可检验训练的情况，得到准确率%
# 提前在argparser.py里TestParser设置好默认训练参数或在运行命令中加入超参数
python test.py
```
### 实时肌肉电数据预测
```shell
# 根据实时的肌肉电数据流预测动作
# 开启多进程模式，读取肌肉电数据流为一个进程，实时获取并识别肌肉模式为一个进程，两者采用管道通信
# 提前在argparser.py里PredictParser设置好默认训练参数或在运行命令中加入超参数
python emg_main.py
```
### 运行整个系统
```shell
# 包含界面的残疾人辅助小车系统
python main.py
```
## 后续工作建议
- 通过研究肌肉分布，找寻合适的肌肉电传感器部署位置，尝试是否能使训练结果更有区分度
- 从科研的角度看，目前的模型核心为简单GRU模型，可以结合当下时序序列处理的前沿方案改进核心模型
- 能够较好完成实时数据流的预测是本系统的亮点，目前采用实时预测时获取的数据的部分处理trick来达到较好效果，后续这个方向值得继续改进，可以有不错的成果
- 采用多模态融合的方式完成更精准更复杂的任务，如脑电、眼动等模态的数据
- 从竞赛项目角度看，建议增加传感器个数和数据维度，丰富系统功能